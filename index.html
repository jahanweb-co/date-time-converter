<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مبدل تاریخ شمسی، میلادی و قمری</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;700&display=swap');
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Vazirmatn', 'Tahoma', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            min-height: 100vh;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            padding: 20px;
            direction: rtl;
        }

        .container {
            background: rgba(255, 255, 255, 0.1);
            padding: 2rem;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 600px;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        .time-display {
            font-size: 1.5rem;
            margin: 1rem 0;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            text-align: center;
            direction: ltr;
            background: rgba(0,0,0,0.2);
            padding: 1rem;
            border-radius: 10px;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .tab {
            flex: 1;
            padding: 10px;
            text-align: center;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab.active {
            background: rgba(255,255,255,0.2);
            font-weight: bold;
        }

        .converter {
            background: rgba(255,255,255,0.05);
            padding: 1.5rem;
            border-radius: 15px;
            margin-top: 1rem;
        }

        .input-group {
            margin-bottom: 1.5rem;
        }

        .input-date {
            display: flex;
            gap: 10px;
            margin-top: 0.5rem;
        }

        input, select {
            padding: 12px;
            border: none;
            border-radius: 8px;
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 1rem;
            text-align: center;
        }

        select {
            width: 100%;
        }

        input:focus, select:focus {
            outline: none;
            background: rgba(255,255,255,0.2);
        }

        .number-input {
            width: 80px;
        }

        .btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 1rem;
        }

        .btn:hover {
            background: #45a049;
            transform: translateY(-2px);
        }

        .result {
            margin-top: 1.5rem;
            padding: 1rem;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
        }

        .result-item {
            margin: 10px 0;
            padding: 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
        }

        .result-title {
            font-size: 0.9rem;
            color: rgba(255,255,255,0.7);
        }

        .result-value {
            font-size: 1.2rem;
            font-weight: bold;
            margin-top: 5px;
        }

        .user-info {
            text-align: center;
            margin-top: 2rem;
            font-size: 0.9rem;
            color: rgba(255,255,255,0.7);
            background: rgba(0,0,0,0.2);
            padding: 0.5rem;
            border-radius: 8px;
        }

        @media (max-width: 480px) {
            .container {
                padding: 1rem;
            }
            .input-date {
                flex-direction: column;
            }
            .number-input {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h2>مبدل تاریخ شمسی، میلادی و قمری</h2>
        </div>

        <div class="time-display" id="utcTime">
            2025-08-11 00:21:24
        </div>

        <div class="tabs">
            <div class="tab active" onclick="switchTab('shamsi')">شمسی</div>
            <div class="tab" onclick="switchTab('miladi')">میلادی</div>
        </div>

        <div class="converter">
            <div id="shamsiInput">
                <div class="input-group">
                    <label>تاریخ شمسی</label>
                    <div class="input-date">
                        <select id="shamsiMonth">
                            <option value="1">فروردین</option>
                            <option value="2">اردیبهشت</option>
                            <option value="3">خرداد</option>
                            <option value="4">تیر</option>
                            <option value="5">مرداد</option>
                            <option value="6">شهریور</option>
                            <option value="7">مهر</option>
                            <option value="8">آبان</option>
                            <option value="9">آذر</option>
                            <option value="10">دی</option>
                            <option value="11">بهمن</option>
                            <option value="12">اسفند</option>
                        </select>
                        <input type="number" id="shamsiDay" class="number-input" placeholder="روز" min="1" max="31">
                        <input type="number" id="shamsiYear" class="number-input" placeholder="سال" min="1300" max="1500">
                    </div>
                </div>
            </div>

            <div id="miladiInput" style="display: none;">
                <div class="input-group">
                    <label>تاریخ میلادی</label>
                    <input type="date" id="gregorianDate" dir="ltr">
                </div>
            </div>

            <div class="input-group">
                <label>ساعت</label>
                <input type="time" id="time" dir="ltr">
            </div>

            <button class="btn" onclick="convertDate()">تبدیل تاریخ</button>

            <div class="result" id="result">
                <div class="result-item">
                    <div class="result-title">تاریخ شمسی:</div>
                    <div class="result-value" id="shamsiResult">--</div>
                </div>
                <div class="result-item">
                    <div class="result-title">تاریخ میلادی:</div>
                    <div class="result-value" id="miladiResult">--</div>
                </div>
                <div class="result-item">
                    <div class="result-title">تاریخ قمری:</div>
                    <div class="result-value" id="hijriResult">--</div>
                </div>
            </div>
        </div>

        <div class="user-info">
            <p>کاربر: jahanweb-co</p>
        </div>
    </div>

    <script>
        // تابع تبدیل اعداد به فارسی
        function toPersianNum(num) {
            const farsiDigits = ['۰', '۱', '۲', '۳', '۴', '۵', '۶', '۷', '۸', '۹'];
            return num.toString().replace(/\d/g, x => farsiDigits[x]);
        }

        // تبدیل تاریخ میلادی به شمسی
        function gregorianToJalali(gy, gm, gd) {
            var g_d_m = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];
            var jy = (gy <= 1600) ? 0 : 979;
            gy -= (gy <= 1600) ? 621 : 1600;
            var gy2 = (gm > 2) ? (gy + 1) : gy;
            var days = (365 * gy) + (parseInt((gy2 + 3) / 4)) - (parseInt((gy2 + 99) / 100)) +
                (parseInt((gy2 + 399) / 400)) - 80 + gd + g_d_m[gm - 1];
            jy += 33 * (parseInt(days / 12053));
            days %= 12053;
            jy += 4 * (parseInt(days / 1461));
            days %= 1461;
            jy += parseInt((days - 1) / 365);
            if (days > 365) days = (days - 1) % 365;
            var jm = (days < 186) ? 1 + parseInt(days / 31) : 7 + parseInt((days - 186) / 30);
            var jd = 1 + ((days < 186) ? (days % 31) : ((days - 186) % 30));
            return [jy, jm, jd];
        }

        // تبدیل تاریخ شمسی به میلادی
        function jalaliToGregorian(jy, jm, jd) {
            var gy = (jy <= 979) ? 621 : 1600;
            jy -= (jy <= 979) ? 0 : 979;
            var days = (365 * jy) + ((parseInt(jy / 33)) * 8) + (parseInt(((jy % 33) + 3) / 4))
                + 78 + jd + ((jm < 7) ? (jm - 1) * 31 : ((jm - 7) * 30) + 186);
            gy += 400 * (parseInt(days / 146097));
            days %= 146097;
            if (days > 36524) {
                gy += 100 * (parseInt(--days / 36524));
                days %= 36524;
                if (days >= 365) days++;
            }
            gy += 4 * (parseInt(days / 1461));
            days %= 1461;
            if (days > 365) {
                gy += parseInt((days - 1) / 365);
                days = (days - 1) % 365;
            }
            var gd = days + 1;
            var sal_a = [0, 31, ((gy % 4 == 0 && gy % 100 != 0) || (gy % 400 == 0)) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
            var gm = 0;
            for (gm = 0; gm < 13 && gd > sal_a[gm]; gm++) gd -= sal_a[gm];
            return [gy, gm, gd];
        }

        // تبدیل تاریخ میلادی به قمری
        function gregorianToHijri(year, month, day) {
            const jd = gregorianToJD(year, month, day);
            return jdToHijri(jd);
        }

        function gregorianToJD(year, month, day) {
            if (month < 3) {
                year -= 1;
                month += 12;
            }
            const a = Math.floor(year / 100.0);
            const b = 2 - a + Math.floor(a / 4.0);
            return Math.floor(365.25 * (year + 4716)) + Math.floor(30.6001 * (month + 1)) + day + b - 1524.5;
        }

        function jdToHijri(jd) {
            jd = Math.floor(jd) + 0.5;
            const year = Math.floor(((30 * (jd - 1948439.5)) + 10646) / 10631);
            const month = Math.min(12, Math.ceil((jd - (29 + gregorianToJD(year, 1, 1))) / 29.5));
            const day = Math.floor(jd - gregorianToJD(year, month, 1)) + 1;
            return [year, month, day];
        }

        // تبدیل نام ماه‌های قمری
        function getHijriMonthName(month) {
            const hijriMonths = [
                'محرم', 'صفر', 'ربیع‌الاول', 'ربیع‌الثانی',
                'جمادی‌الاول', 'جمادی‌الثانی', 'رجب', 'شعبان',
                'رمضان', 'شوال', 'ذی‌القعده', 'ذی‌الحجه'
            ];
            return hijriMonths[month - 1];
        }

        let currentTab = 'shamsi';

        function switchTab(tab) {
            currentTab = tab;
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelector(`.tab:nth-child(${tab === 'shamsi' ? '1' : '2'})`).classList.add('active');
            document.getElementById('shamsiInput').style.display = tab === 'shamsi' ? 'block' : 'none';
            document.getElementById('miladiInput').style.display = tab === 'miladi' ? 'block' : 'none';
        }

        function convertDate() {
            const time = document.getElementById('time').value;
            let shamsiDate, miladiDate, hijriDate;

            if (currentTab === 'shamsi') {
                const shamsiYear = parseInt(document.getElementById('shamsiYear').value);
                const shamsiMonth = parseInt(document.getElementById('shamsiMonth').value);
                const shamsiDay = parseInt(document.getElementById('shamsiDay').value);

                if (!shamsiYear || !shamsiDay) {
                    alert('لطفاً تاریخ را کامل وارد کنید');
                    return;
                }

                // تبدیل شمسی به میلادی
                const [gy, gm, gd] = jalaliToGregorian(shamsiYear, shamsiMonth, shamsiDay);
                miladiDate = [gy, gm, gd];
                shamsiDate = [shamsiYear, shamsiMonth, shamsiDay];
                hijriDate = gregorianToHijri(gy, gm, gd);

            } else {
                const gregorianDate = document.getElementById('gregorianDate').value;
                if (!gregorianDate) {
                    alert('لطفاً تاریخ را وارد کنید');
                    return;
                }

                const date = new Date(gregorianDate);
                miladiDate = [date.getFullYear(), date.getMonth() + 1, date.getDate()];
                shamsiDate = gregorianToJalali(miladiDate[0], miladiDate[1], miladiDate[2]);
                hijriDate = gregorianToHijri(miladiDate[0], miladiDate[1], miladiDate[2]);
            }

            const persianMonths = [
                'فروردین', 'اردیبهشت', 'خرداد', 'تیر', 'مرداد', 'شهریور',
                'مهر', 'آبان', 'آذر', 'دی', 'بهمن', 'اسفند'
            ];

            // نمایش نتایج
            document.getElementById('shamsiResult').textContent = 
                `${toPersianNum(shamsiDate[2])} ${persianMonths[shamsiDate[1]-1]} ${toPersianNum(shamsiDate[0])}`;
            
            document.getElementById('miladiResult').textContent = 
                `${toPersianNum(miladiDate[2])}-${toPersianNum(String(miladiDate[1]).padStart(2, '0'))}-${toPersianNum(miladiDate[0])}`;
            
            document.getElementById('hijriResult').textContent = 
                `${toPersianNum(hijriDate[2])} ${getHijriMonthName(hijriDate[1])} ${toPersianNum(hijriDate[0])}`;

            if (time) {
                ['shamsiResult', 'miladiResult', 'hijriResult'].forEach(id => {
                    document.getElementById(id).textContent += ` - ${toPersianNum(time)}`;
                });
            }
        }

        // تنظیم تاریخ پیش‌فرض
        const today = new Date();
        const todayFormatted = today.toISOString().split('T')[0];
        document.getElementById('gregorianDate').value = todayFormatted;

        // تنظیم مقادیر پیش‌فرض شمسی
        const [jYear, jMonth, jDay] = gregorianToJalali(
            today.getFullYear(),
            today.getMonth() + 1,
            today.getDate()
        );
        document.getElementById('shamsiYear').value = jYear;
        document.getElementById('shamsiMonth').value = jMonth;
        document.getElementById('shamsiDay').value = jDay;
    </script>
</body>
</html>
